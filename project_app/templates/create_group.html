{% extends 'base.html' %}

{% block title %}Create Group - Finance Flow{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <!-- Sidebar -->
        <div class="col-md-3 col-lg-2 sidebar p-4">
            <div class="d-flex align-items-center mb-4">
                <i class="bi bi-wallet2 fs-3 me-2 text-primary"></i>
                <h4 class="mb-0 gradient-text">Finance Flow</h4>
            </div>
            
            <nav class="nav flex-column">
                <a class="nav-link" href="{% url 'dashboard' %}">
                    <i class="bi bi-house-door me-2"></i>Dashboard
                </a>
                <a class="nav-link" href="{% url 'expense' %}">
                    <i class="bi bi-cash-stack me-2"></i>Expenses
                </a>
                <a class="nav-link" href="{% url 'income' %}">
                    <i class="bi bi-currency-dollar me-2"></i>Income
                </a>
                <a class="nav-link active" href="{% url 'groups' %}">
                    <i class="bi bi-people me-2"></i>Groups
                </a>
                <a class="nav-link" href="{% url 'reports' %}">
                    <i class="bi bi-graph-up me-2"></i>Reports
                </a>
                <a class="nav-link" href="{% url 'analytics' %}">
                    <i class="bi bi-bar-chart me-2"></i>Analytics
                </a>
                <a class="nav-link" href="{% url 'profile' %}">
                    <i class="bi bi-person me-2"></i>Profile
                </a>
                <a class="nav-link" href="{% url 'logout' %}">
                    <i class="bi bi-box-arrow-right me-2"></i>Logout
                </a>
            </nav>
        </div>

        <!-- Main Content -->
        <div class="col-md-9 col-lg-10 p-4">
            <div class="d-flex align-items-center mb-4">
                <a href="{% url 'groups' %}" class="btn btn-outline-secondary me-3">
                    <i class="bi bi-arrow-left me-2"></i>Back to Groups
                </a>
                <h2 class="gradient-text mb-0">
                    <i class="bi bi-plus-circle me-2"></i>Create New Group
                </h2>
            </div>

            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <div class="glass-card p-4">
                        <!-- Header Section -->
                        <div class="text-center mb-5">
                            <h3 class="gradient-text mb-3">Create a New Group</h3>
                            <p class="text-muted fs-5">
                                Organize your shared expenses with ease. Whether you're planning a trip, managing a flat, 
                                or sharing monthly costs with friends — this group helps everyone stay on track.
                            </p>
                        </div>

                        <form method="post">
                            {% csrf_token %}
                            
                            <!-- Section 1: Group Information -->
                            <div class="mb-5">
                                <h4 class="mb-4">
                                    <i class="bi bi-info-circle me-2 text-primary"></i>
                                    Group Information
                                </h4>
                                
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="name" class="form-label fw-bold">
                                            <i class="bi bi-tag me-2"></i>Group Name
                                        </label>
                                        <input type="text" class="form-control form-control-lg" id="name" name="name" 
                                               placeholder="What would you like to name your group?" required>
                                        <div class="form-text">
                                            <i class="bi bi-lightbulb me-1"></i>
                                            Examples: Goa Trip, Flatmates, Office Snacks, Birthday Party
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-6 mb-3">
                                        <label for="group_type" class="form-label fw-bold">
                                            <i class="bi bi-list-ul me-2"></i>Group Type
                                        </label>
                                        <select class="form-select form-select-lg" id="group_type" name="group_type">
                                            <option value="">Choose the type of group to help categorize your expenses.</option>
                                            <option value="travel">Travel</option>
                                            <option value="home">Home</option>
                                            <option value="couple">Couple</option>
                                            <option value="friends">Friends</option>
                                            <option value="work">Work</option>
                                            <option value="other">Other</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="currency" class="form-label fw-bold">
                                            <i class="bi bi-currency-exchange me-2"></i>Currency
                                        </label>
                                        <select class="form-select form-select-lg" id="currency" name="currency">
                                            <option value="">Select the currency for all expenses in this group.</option>
                                            <option value="INR">₹ INR</option>
                                            <option value="USD">$ USD</option>
                                            <option value="EUR">€ EUR</option>
                                            <option value="GBP">£ GBP</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- Section 2: Add Members -->
                            <div class="mb-5">
                                <h4 class="mb-4">
                                    <i class="bi bi-people me-2 text-primary"></i>
                                    Add Members
                                </h4>
                                <p class="text-muted mb-4">
                                    Invite the people with whom you'll share expenses. You can add them by name or email.
                                </p>
                                
                                <div id="members-container">
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <label class="form-label fw-bold">
                                                <i class="bi bi-person me-2"></i>Member 1
                                            </label>
                                            <input type="text" class="form-control" name="member_1" 
                                                   placeholder="Enter name or email">
                                        </div>
                                    </div>
                                    
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <label class="form-label fw-bold">
                                                <i class="bi bi-person me-2"></i>Member 2
                                            </label>
                                            <input type="text" class="form-control" name="member_2" 
                                                   placeholder="Enter name or email">
                                        </div>
                                    </div>
                                </div>
                                
                                <button type="button" class="btn btn-outline-primary" id="add-member-btn">
                                    <i class="bi bi-plus-circle me-2"></i>+ Add another member
                                </button>
                                <div class="form-text mt-2">
                                    <i class="bi bi-info-circle me-1"></i>
                                    You can invite members later too.
                                </div>
                            </div>

                            <!-- Section 3: Group Settings -->
                            <div class="mb-5">
                                <h4 class="mb-4">
                                    <i class="bi bi-gear me-2 text-primary"></i>
                                    Group Settings (Optional)
                                </h4>
                                
                                <div class="row">
                                    <div class="col-md-6 mb-4">
                                        <label class="form-label fw-bold">
                                            <i class="bi bi-arrow-repeat me-2"></i>Split Type
                                        </label>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="split_type" 
                                                   id="equal_split" value="equal" checked>
                                            <label class="form-check-label" for="equal_split">
                                                Equal Split
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="split_type" 
                                                   id="custom_split" value="custom">
                                            <label class="form-check-label" for="custom_split">
                                                Custom Percentages
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-6 mb-4">
                                        <label class="form-label fw-bold">
                                            <i class="bi bi-bell me-2"></i>Send Reminders for Settling Up?
                                        </label>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="reminders" 
                                                   id="weekly" value="weekly">
                                            <label class="form-check-label" for="weekly">
                                                Weekly
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="reminders" 
                                                   id="monthly" value="monthly">
                                            <label class="form-check-label" for="monthly">
                                                Monthly
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="reminders" 
                                                   id="never" value="never" checked>
                                            <label class="form-check-label" for="never">
                                                Never
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6 mb-4">
                                        <label class="form-label fw-bold">
                                            <i class="bi bi-arrow-clockwise me-2"></i>Allow Recurring Expenses?
                                        </label>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="recurring_expenses" 
                                                   id="recurring_yes" value="yes" checked>
                                            <label class="form-check-label" for="recurring_yes">
                                                Yes
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="recurring_expenses" 
                                                   id="recurring_no" value="no">
                                            <label class="form-check-label" for="recurring_no">
                                                No
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Create Group Button -->
                            <div class="text-center">
                                <button type="submit" class="btn btn-primary btn-lg px-5 py-3">
                                    <i class="bi bi-check-circle me-2"></i>Create Group
                                </button>
                                <div class="form-text mt-2">
                                    <i class="bi bi-info-circle me-1"></i>
                                    Click to set up your group and start adding expenses!
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const addMemberBtn = document.getElementById('add-member-btn');
    const membersContainer = document.getElementById('members-container');
    let memberCount = 2;

    addMemberBtn.addEventListener('click', function() {
        memberCount++;
        const newMemberDiv = document.createElement('div');
        newMemberDiv.className = 'row mb-3';
        newMemberDiv.innerHTML = `
            <div class="col-md-6">
                <label class="form-label fw-bold">
                    <i class="bi bi-person me-2"></i>Member ${memberCount}
                </label>
                <input type="text" class="form-control" name="member_${memberCount}" 
                       placeholder="Enter name or email">
            </div>
        `;
        membersContainer.appendChild(newMemberDiv);
    });
});
</script>
{% endblock %}